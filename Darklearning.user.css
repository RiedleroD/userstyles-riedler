/* ==UserStyle==
@name			Darklearning
@namespace		https://github.com/RiedleroD/userstyles-riedler
@version		1.2.3
@description	Darker version of Elearning
@author			Riedler
@preprocessor	stylus
@var	select	sidebar	"Navigation Sidebar"{
	"Grow on hover":"Goh",
	"Slide on hover":"Soh",
	"Static":"S"}
@var	select CPB		"Card Progressbar"{
	"Compact":"C",
	"Compact Borderless":"CBL",
	"Normal Sized":"NS",
	"Round":"R",
	"Round Borderless":"RBL",
	"Round Compact":"RC"
}
@var	select	LSI		"Link Selection Indicator"{
	"Clamps":"C",
	"Braces":"B",
	"Underbelly":"U",
	"Flat":"F",
	"Round":"R",
	"Encased":"E"
}
@var	select	PBCS	"ProgressBarCell Shape"{
	"Pronounced":"pron",
	"Teardrop":"tear",
	"Round":"rnd",
	"Rounded":"rndd",
	"Soft Edges":"sft",
	"Rectangle":"rect",
	"Modifier debug":"debug_mod"
}
@var	select	PBCSm "ProgressBarCell Modifier"{
	"Normal":"normal",
	"Horizontal flip":"hflip",
	"Vertical flip":"vflip",
	"Flip right side":"rflip",
	"Flip left side":"lflip",
	"Flip top side":"tflip",
	"Flip bottom side":"bflip",
	"Rotate 90°":"r90",
	"Rotate 180°":"r180",
	"Rotate 270°":"r270"
}
@var	select	NBCS	"Course Navbar Cell Shape"{
	"Pronounced":"pron",
	"Teardrop":"tear",
	"Round":"rnd",
	"Rounded":"rndd",
	"Soft Edges":"sft",
	"Rectangle":"rect",
	"Modifier debug":"debug_mod"
}
@var	select	NBCSm "Course Navbar Cell Modifier"{
	"Normal":"normal",
	"Horizontal flip":"hflip",
	"Vertical flip":"vflip",
	"Flip right side":"rflip",
	"Flip left side":"lflip",
	"Flip top side":"tflip",
	"Flip bottom side":"bflip",
	"Rotate 90°":"r90",
	"Rotate 180°":"r180",
	"Rotate 270°":"r270"
}
@var	select	NBS		"Course Navbar Shape"{
	"Pronounced":"pron",
	"Teardrop":"tear",
	"Round":"rnd",
	"Rounded":"rndd",
	"Soft Edges":"sft",
	"Rectangle":"rect",
	"Modifier debug":"debug_mod"
}
@var	select	NBSm "Course Navbar Modifier"{
	"Normal":"normal",
	"Horizontal flip":"hflip",
	"Vertical flip":"vflip",
	"Flip right side":"rflip",
	"Flip left side":"lflip",
	"Flip top side":"tflip",
	"Flip bottom side":"bflip",
	"Rotate 90°":"r90",
	"Rotate 180°":"r180",
	"Rotate 270°":"r270"
}
@var	checkbox	anon	"Anonymity (for screenshots)" 0
@var	select	EICC	"Embedded Image Color Correction"{
	"Recommended":"invert(0.86) hue-rotate(180deg)",
	"Full":"invert(1) hue-rotate(180deg)",
	"Dim":"brightness(0.8)",
	"Debug":"invert(1) hue-rotate(180deg) saturate(100)",
	"Off":"none"}
@var	text	ntip	"Navigation Tree initial padding"	"0"
@var	text	ntmp	"Navigation Tree max padding"		"0.5rem"
==/UserStyle== */

//color variables
bg0  = #000
bg1	 = #151515
bg2	 = #222
bg2_5= #252525
bg3	 = #333
bg3_5= #383838
bg4	 = #444
bg5	 = #555
bg6	 = #666
slc	 = #000
brd	 = #888
hbrd = #AAA
dtxt = #151515
txt	 = #AAA
htxt = #CCC
hhtxt= #FFF
mtxt = #8AA
lnk	 = #418BA4
hlnk = #6AC
btn	 = #418BA4
hbtn = #6AC
tru	 = #262
htru = #6C6
fals = #922
hfals= #C66
idk  = #B60
cal0 = #533
cal1 = #535
cal2 = #553
cal3 = #555
cal4 = #353
pb	 = #669
c0	 = #66A
c1	 = #3C3
c2	 = #CC3
c3	 = #C33

irad = 0.3rem //input border radius
crad = 0.5rem //card border radius


svg_select_arrs="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' version='1'%3E%3Cpath fill='"+rgba(txt,0.999)+"' stroke='"+rgba(txt,0.999)+"' d='M8 1 2 6h12zM2 10H14L8 15Z'/%3E%3C/svg%3E"

barshape_base(name){
	if name=="pron"{
		return (0.5em) (0.5em) (1em) (1em)
	}else if name=="tear"{
		return (0) (0.5em) (0.5em) (0.5em)
	}else if name=="rnd"{
		return (1em) (1em) (1em) (1em)
	}else if name=="rndd"{
		return (0.5em) (0.5em) (0.5em) (0.5em)
	}else if name=="sft"{
		return (0.25em) (0.25em) (0.25em) (0.25em)
	}else if name=="rect"{
		return (0) (0) (0) (0)
	}else if name=="debug_mod"{
		return (0) (0.5em) (1em) (0.25em)
	}else{
		return (100%) (100%) (100%) (100%)
	}
}
barshape(name,mod){
	shape=barshape_base(name)
	if mod=="normal"{
		return (shape[0]) (shape[1]) (shape[2]) (shape[3])
	}else if mod=="hflip"{
		return (shape[3]) (shape[2]) (shape[1]) (shape[0])
	}else if mod=="vflip"{
		return (shape[1]) (shape[0]) (shape[3]) (shape[2])
	}else if mod=="rflip"{
		return (shape[0]) (shape[2]) (shape[1]) (shape[3])
	}else if mod=="lflip"{
		return (shape[3]) (shape[1]) (shape[2]) (shape[0])
	}else if mod=="tflip"{
		return (shape[1]) (shape[0]) (shape[2]) (shape[3])
	}else if mod=="bflip"{
		return (shape[0]) (shape[1]) (shape[3]) (shape[2])
	}else if mod=="r90"{
		return (shape[3]) (shape[0]) (shape[1]) (shape[2])
	}else if mod=="r180"{
		return (shape[2]) (shape[3]) (shape[0]) (shape[1])
	}else if mod=="r270"{
		return (shape[1]) (shape[2]) (shape[3]) (shape[0])
	}else{
		return (100%) (0) (100%) (0)
	}
}
lbarshape(name,mod){
	shape=barshape(name,mod)
	return (shape[0]) (0) (0) (shape[3])
}
rbarshape(name,mod){
	shape=barshape(name,mod)
	return (0) (shape[1]) (shape[2]) (0)
}
@-moz-document domain("elearning.tgm.ac.at"), regexp(".*userstyle_testing/darklearning.*"){
	/*text selections*/
	::-moz-selection{/*for firefox and derivatives*/
		background:slc;}
	::selection{/*for most other browsers that support this*/
		background:slc;}
	/*scrollbar*/
	::-webkit-scrollbar{
		&,
		&-track-piece{
			background-color:bg1 !important;
		}
		&-corner,
		&-thumb{
			background-color:bg3 !important;
			border-radius:0.4em;
		}
	}
	:root{/*Because Firefox doesn't have the ::-moz-scrollbar selectors*/
		scrollbar-width:thin;
		scrollbar-color:bg3 bg1;}
	/*navbar*/
	.navbar{
		background-color:bg2;
		border-bottom-right-radius:0.5em;
		border-bottom-left-radius:0.5em;}
	.breadcrumb:not(:empty){
		border-color:brd;
		border-width:1px;}
	.navbar-light, 
	.navbar-bootswatch,{
		& .navbar-nav{
			& .nav-link{
				color:lnk;
				&:hover,
				&:focus{
					color:hlnk;
				}
			}
			& .active,
			& .show{
				&>.nav-link{color:hlnk}
			}
		}
	}
	/*dropdown-menu*/
	.dropdown{
		&-menu{
			background-color:bg3;
		}
		&-divider{
			border-top-color:brd;
		}
		&-item{
			&,
			&:focus{
				background-color:#0000;
				color:lnk;
			}
			&:hover{
				background-color:bg4;
				color:hlnk;
			}
		}
	}
	/*notification drawer*/
	.popover-region{
		&-container{
			background-color:bg3;
			border-color:brd;
			border-radius:irad;}
		&-toggle{
			&::after{
				border-bottom-color:bg3;
			}
			&::before{
				border-bottom-color:brd;
			}
		}
		&-header-container{
			border-bottom-color:brd;
		}
		&-footer-container{
			background-color:bg3;
			border-top-color:brd;
			border-radius:0 0 irad irad;
		}
	}
	.content-item-container{
		border-bottom-color:brd;
		color:txt;
		&:hover{
			background-color:bg4;
			color:htxt;}
		&.unread{
			background-color:bg4;}
		&.unread:hover{
			background-color:bg5;}
		& .content-item-footer .timestamp{
			color:txt;}
	}
	/*message drawer*/
	.message-app{
		background-color:bg2 !important;
		& .input-group{
			&>input,
			&-text{
				background-color:bg3 !important;
				border-color:brd;
				color:brd;
			}
			& .btn{
				border-color:brd;
			}
		}
		& .form-control:focus{
			color:txt;}
		& .card{
			background-color:bg2;}
		& .border-bottom{
			border-color:brd !important;}
		& .card.expanded .list-group .list-group-item{
			background-color:bg3;}
		&>.header-container>.bg-white{
			background-color:bg3 !important;}
		& .message{
			&.send{
				background-color:bg5 !important;
			}
			&.received{
				background-color:bg4 !important;
				& .tail{
					border-bottom-color:bg4;
				}
			}
			&.send .tail{
				border-bottom-color:bg5;
			}
		}
		& .list-group .list-group-item{
			background:bg3;}
		& .nav-pills{
			border:solid brd 1px;
			&>.nav-item>a{
				&:not(.active){
					background-color:bg3;}
				&.active{
					background-color:bg4;}
			}
		}
		& .no-gutters{
		outline:solid 1px bg3;}
		& .content-message-container>div[data-region="self-conversation-message-container"]{
			background-color:bg4 !important;}
		&>div>div>div{
			outline:solid 1px bg3;}
		& .col-8>.footer-container>.bg-white{
			background-color:bg3 !important;
			border:none !important;}
		& button.btn-icon.btn-link{
			&:hover,
			&:focus{
				background-color:bg5 !important;
			}
		}
		& textarea.form-control{
			background-color:bg4 !important;
			border:none;
		}
		& .header-container>.bg-white{
			background-color:bg3 !important;
			border-color:bg3 !important;
		}
		& .body-container{
			& div[data-region="settings"]{
				background-color:bg2;
			}
			&>div.h-100.bg-white{
				background-color:bg2 !important;
			}
		}
		&>.footer-container>.bg-white{
			background-color:bg2 !important;
			border-color:brd !important;
		}
		&>.closewidget{
			background-color:bg3 !important;
			&>a{
				color:txt !important;
			}
		}
		& [data-region="contacts-container"]{
			background-color:bg3;}
		& [data-region="non-contacts-container"]{
			background-color:bg3;
			border-top-color:brd !important;}
		& div[data-region="all-contacts-container"] .text-right{
			background-color:bg3;
			border-top: solid 1px brd;
			&:hover{
				background-color:bg5;
			}
		}
		& div[data-region="content-placeholder"] div.px-2.pb-2.pt-0.h-100{
			background-color:bg3 !important;
			&>.mt-4>.mb-4>.mx-auto{
				background-color:bg5 !important;
				border-radius:0.25rem;//TODO: no idea what this style is for
			}
			&>.mt-4>.d-flex.flex-column.p-2.rounded.mb-2{
				background-color:bg5 !important;
			}
		}
		& div[data-region="confirm-dialogue"]{
			background-color:bg3 !important;
			border:solid 1px brd;
			border-radius:crad;
			& .btn-primary{
				&>span{
					color:htxt !important;
				}
				&:hover>span{
					color:hhtxt !important;
				}
			}
		}
	}
	#conversation-actions-menu-button{
		color:brd;
		&:hover{
			background-color:bg5;
		}
		&:focus{
			background-color:bg6;
		}
	}
	.custom-control{
		&-label{
			cursor:pointer;
			&::before{
				background-color:brd;
			}
		}
		&-input{
			&:checked~^[0]-label::before{
				background-color:btn !important;
				border-color:btn !important;
				color:htxt;
				cursor:pointer;
			}
			&:not(:checked)~^[0]-label::before{
				background-color:bg3 !important;
				border-color:brd;
				cursor:pointer;
			}
		}
		.custom-switch &-input{
			&:checked~^[0]-label::after{
				background-color:htxt;
				cursor:pointer;
			}
			&:not(:checked)~^[0]-label::after{
				background-color:brd;
				cursor:pointer;
			}
		}
		.custom-radio &-input:checked~&-label::after{
			background-image:radial-gradient(ellipse at center,htxt 0%,htxt 75%,#0000 75%);
			border-radius:100%;
		}
	}
	.custom-select{
		color:txt;
		border-color:brd;
		border-radius:irad;
		background-color:bg3;
		background-image:url(svg_select_arrs);
		background-repeat:no-repeat;
		background-size:0.75em;
		&:disabled{
			color:txt;
			background-color:bg3;
			background-image:none;
			&:hover{
				color:txt;
				background-color:bg3;
			}
		}
		&:hover,
		&:focus{
			background-color:bg4;
			color:txt;
		}
	}
	.switch input{
		&+label::before{
			background-color:brd;
		}
		&:checked + label::before{
			background-color:btn;
		}
	}
	/*body*/
	:root,body,#page{
		background-color:bg1 !important;}
	#region-main{
		border-radius:crad;
		overflow:visible;
		margin-bottom:1.5em;
		background-color:bg2;}
	#page-header>div>div.card{
		background-color:bg2;}
	/*footer*/
	#page-footer{
		background-color:bg2 !important;
		border-top-left-radius:0.5em;
		border-top-right-radius:0.5em;
		& a{
			color:lnk;
			&:hover,
			&:focus{
				color:hlnk;
			}
		}
	}
	/*sideblocks*/
	.block{
		&.card{
			background-color:bg2;
		}
		&-timeline{
			& .paged-content-page-container .list-group-flush>.list-group-item{
				background-color:bg2;
			}
			& .tab-content img{
				filter:none;
			}
		}
		&_navigation,
		&_settings{
			& .block_tree{
				& .tree_item.branch,
				& ul,
				& p.hasicon{
					padding-left:0;
					margin-left:0;
				}
			}
		}
		&_navigation{
			& .block_tree{
				& .tree_item{
					max-width:100%;
					width:max-content;
					position:relative;
					background-color:bg2;
					z-index:2;
					border-radius:0 irad irad 0;
					transition:0.2s max-width;
				}	
				& .contains_branch>ul{
					transition: padding-left 0.2s;
					if sidebar=="S"{
						padding-left:ntmp;
					}else{
						padding-left:ntip;
					}
				}
			}
			&:hover .block_tree{
				if sidebar=="Goh"{
					& .tree_item{
						white-space:nowrap;
						overflow:hidden;
						max-width:25vw;
						padding-right:0.25em;
					}
				}
				if sidebar!="S"{
					& .contains_branch>ul{
						padding-left:ntmp;
					}
				}
			}
		}
		& .block-cards{
			& a.coursename{
				color:lnk;
				&:hover,
				&:focus{
					color:hlnk;
				}
			}
			& span.categoryname{
				color:txt;
			}
			& .btn-link{
				color:txt;
				
			}
			& .btn.btn-link.btn-icon{
				&:hover,
				&:focus{
					background-color:bg4;
				}
			}
		}
		& .block-controls{
			& .dropdown-toggle{
				color:txt;
			}
		}
	}
	/*text*/
	span,p,pre,
	.text-center,.text-right,
	.logininfo,.generaltable,
	h1,h2,h3,h4,h5,h6,
	body,:root,
	ul,ol{
		color:txt;}
	.generaltable tbody tr:hover{
		color:htxt !important;}
	textarea.form-control{
		background-color:bg5 !important;
		border:solid brd 1px;
		border-radius:irad;}
	.text-muted{
		color:mtxt !important;
	}
	/*links*/
	a,
	a>span{
		color:lnk
	}
	a:hover,
	a:focus{
		&,
		&>span{
			color:hlnk;
		}
	}
	/*Text with inline background coloring*/
	span[style*="background-color: rgb(125\, 159\, 211);"]{
		background-color:btn !important;
		color:dtxt !important;}
	span[style*="background-color: rgb(255\, 207\, 53);"],
	span[style*="background-color: rgb(152\, 202\, 62);"]{
		color:#000 !important;}
	span[style*="background-color: white;"]:not([class]){
		background-color:#0000 !important;}
	span[style*="background-color: rgb(239\, 69\, 64);"]{
		background-color:fals !important;}
	span[style*="color: rgb(239\, 69\, 64)"]{
		color:hfals !important;
		&[style*="background-color: rgb(255\, 255\, 255)"]{
			background-color:bg0 !important;
		}
	}
	span>span[style*="background-color: rgb(255\, 255\, 255)"]{
		background-color:bg2 !important;
	}
	/*VPL badge*/
	div[style="float:right; right:10px; padding:8px; background-color: white;text-align:center;"]{
		background-color:bg3 !important;
		border-radius:irad;
		box-shadow:0 0 0.2rem 1px #000;
		transition:background-color 0.1s;
		cursor:pointer;
		&:hover{
			background-color:bg4 !important;
			& a{
				color:hlnk !important;
			}
		}
		& a:hover{
			text-decoration:none;
		}
	}
	/*random shit again*/
	.logo>img{
		filter:invert(1) hue-rotate(180deg);}
	.empty-placeholder-image-lg{
		filter:invert(1);
	}
	.dndupload-arrow{
		filter:invert(0.9) hue-rotate(180deg);
	}
	/*Buttons*/
	.close,
	.moodle-dialogue-base .closebutton{
		&:hover,
		&:focus{
			color:txt;
			opacity:1;
		}
	}
	.moodle-dialogue-base .moodle-dialogue-wrap{
		border:solid 1px brd;
		border-radius:0.25em;//TODO what's this
	}
	.btn{
		border-radius:irad;
		&-outline-secondary{
			border-color:brd !important;
			&:hover{
				background-color:bg3 !important;
			}
			&:focus{
				background-color:bg4 !important;
			}
			&:not(:disabled):not(.disabled):active,
			&:not(:disabled):not(.disabled).active,
			&.dropdown-toggle:focus{
				background-color:bg4;
			}
		}
		&-outline-success{
			border-color:tru;
			color:txt;
			&:hover{
				background-color:tru;
				border-color:tru;
				color:htru;
			}
			&:not(:disabled):not(.disabled):active{
				background-color:htru;
				border-color:htru;
				color:dtxt;
			}
		}
		&-secondary{
			background-color:#FFF2;
			color:txt;
			border:none;
			&:hover{
				background-color:#FFF4;
				color:htxt;
				border-color:brd;}
			&:focus,
			&.focus{
				box-shadow:inset 0 0.1em 0 0 hbrd;
				outline:solid 1px brd;
				outline-offset:1px;
				background-color:brd;
				color:dtxt;}
			&.disabled,
			&:disabled{
				background-color:bg5;
				color:txt;}
		}
		&-primary{
			color:htxt !important;
			background-color:btn;
			&:hover{
				color:hhtxt !important;
				background-color:hbtn;}
			&.close:hover>span{
				color:hhtxt !important;}
			&:focus,
			&.focus{
				outline:none;}
		}
		&-light{
			color:txt;
			&:hover{
				color:lnk;
			}
			&.focus,
			&:focus{
				color:hlnk;
			}
			&:not(:disabled):not(.disabled):active,
			&:not(:disabled):not(.disabled).active,
			.show > &.dropdown-toggle{
				color:hlnk;
			}
		}
	}
	& .btn-link{
		color:lnk;
		transition:none;
		&:hover,
		&:focus{
			color:hlnk;
		}
	}
	.pagination>.page-item{
		&>a{
			background-color:bg3;
			border-color:bg2;}
		&.disabled>a{
			background-color:bg4;
			border-color:bg2;
			&>span{
				color:brd;
			}
		}
		&:not(.active)>a:hover{
			background-color:bg4;}
		&.active>a{
			color:htxt;
			&:hover{
				background-color:hbtn;
				color:hhtxt;
			}
		}
	}
	.preference-state-status-container>span{
		&.on-text,
		&.off-text{
			color:bg1 !important;
		}
	}
	.hover-tooltip{
		background-color:bg3 !important;
		border: solid 1px brd !important;
		&::after{
			border-top-color:bg3 !important;
			filter:drop-shadow(0 1px 0 brd);
		}
	}
	#goto-top-link>a.btn{
		background-color:bg3;
		border:none;
		box-shadow:0 0 0.2rem 1px bg0;
		transform:translate(-50%,-100%);
		&:hover{
			background-color:bg4;
		}
		&:focus{
			outline:none;
			box-shadow:0 0 0.2rem 1px lnk;
		}
		&>.icon{
			margin-right:0;
		}
	}
	/*Dropdown menus*/
	.dropdown-item:active,.dropdown-item.active{
		background-color:bg4;}
	/*These new tiles, ykwim*/
	.tiles{
		&>.tile,
		&>.section{
			background-color:bg2 !important;
		}
	}
	.format-tiles{
		& #header-overlay,
		& #window-overlay{
			opacity:0;}
		& #page .course-content ul li.section.main{
			background-color:bg2;
		}
		& li.activity.subtile{
			background-color:bg2;
			border-color:brd;
			& .activitytitle a{
				background:linear-gradient(to bottom,bg4 85%,#0000);
			}
		}
		& #buttonhidesec0{
			background-color:#0000;
			&:hover{
				background-color:bg4;
				border-radius:irad;
			}
		}
		& .modal-header .close{
			&>span{
				color:htxt !important;
			}
			&:hover>span{
				color:fals !important;
			}
		}
		& .sectiontitle::after,
		& .tag-info{
			background-color:tru;}
		& .course-content{
			& ul.tiles .tile{
				box-shadow:2px 4px 5px 0 #000A;
				transform:translateY(0);//this is needed for compatibility
				border-top:none;
				border-radius:irad;
				&:hover{
					box-shadow:2px 10px 8px -3px #000A;
					transition:all 0.25s ease-in-out;
					transform:translateY(-6px);
				}
				&_bar{//TODO what's this
					border-top:none;
					border-radius:0.3rem;
					background-color:#F00;
				}
				&.phototile{
					background-color:#444 !important;/*darkening the background image*/
					background-blend-mode:overlay;
					& .photo-tile-text h3{
						color:htxt !important;
						font-weight:500;
						font-size:1.25rem;
						background-color:lnk;
					}
				}
			}
			& .section .activity:hover{
				background-color:bg3;
			}
		}
		& .course-content li.activity.label,
		& .editor_atto_content_wrap{
			& h1,& h2,& h3,& h4{
				border-left-color:tru;
			}
		}
	}
	/*php-generated code block with colors without classes*/
	div[style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"]{
		background-color:bg0 !important;
		& span[style*="color: #000080"]{
			color:c0 !important;
		}
		& span[style*="color: #008800"]{
			color:c1 !important;
		}
		& span[style*="color: #0000FF"]{
			color:c2 !important;
		}
		& span[style*="color: #FF0000"]{
			color:c3 !important;
		}
	}
	/*tooltips: popups that pop up when you hover over stuff with set tooltips*/
	.tooltip>*{
		background-color:bg3 !important;
		color:txt !important;}
	.popover{//click on the questionmark at the bottom of https://elearning.tgm.ac.at/course/view.php?id=3239&section=1
		background-color:bg1;
		color:txt;
		border:none;
		border-radius:irad;
		box-shadow:0 0 0.1em 0 brd;}
		/*TODO: this is janky, a better solution is desireable.*/
		//TODO: it seems the popup arrow isn't styled
	.bs-popover{
		&-top,
		&-auto[x-placement^="top"],
		&-bottom,
		&-auto[x-placement^="bottom"]{
			&>.arrow{
				&::before{
					border-top-color:brd;
					border-bottom-color:brd;
					opacity:0.8;
				}
				&::after{
					border-top-color:bg1;
					border-bottom-color:bg1;
				}
			}
		}
		&-bottom,
		&-auto[x-placement^="bottom"]{
			& .popover-header::before{
				border-bottom:solid 0.1em bg2;
			}
		}
	}
	.popover{
		&-header{//TODO what's this
			background-color:bg2;
			border-bottom-color:#0000;
			border-radius:0.5em 0.5em 0 0;
			color:htxt !important;}
		&-body{
			color:txt;
			border-radius:0.5em;}
	}
	/*Manually colored tables*/
	table[bgcolor="grey"]{
		background-color:bg4;
	}
	th[style*="background-color: rgb(146\, 208\, 80)"]{
		background-color:tru !important;
	}
	th[style*="background-color: #fef65b"]{
		background-color:idk !important;
	}
	/*Misc*/
	.otherstudent.highlight{
		outline:none;
		color:htxt;
	}
	.resourcelinkdetails{
		color:txt;
		filter:brightness(0.8);
	}
	.usertext{
		color:lnk !important;
	}
	#action-menu-toggle-0:hover .usertext{
		color:hlnk !important;//TODO: fix this mess by removing the catch-all text colorator
	}
	if(anon==1){
		.usertext{
			display:none;
		}
		.userbutton::before{
			content:"Anonymous User";
			margin-right:0.25rem;
			color:lnk;
		}
		#action-menu-toggle-0:hover .userbutton::before,
		#action-menu-toggle-0:focus .userbutton::before{
			color:hlnk;
		}
		#page-footer .logininfo>a:first-child{
			font-size:0;
			text-decoration:none;//produces visual glitches when left on
			&::after{
				font-size:0.9375rem;//that's the usual font size in elearning
				content:"Anonymous"
				text-decoration:underline;
			}
		}
	}
	.nav-tabs,
	.nav-pills{
		background-color:bg3;
		border-radius:barshape(NBS,NBSm);
		border-bottom:none;
		.show>& .nav-link.active.dropdown-toggle{
			background-color:bg4;
			border-radius:barshape(NBCS,NBCSm);
		}
		& .nav-link{
			background-color:#0000;
			border:none;
			padding:0.5em 1em;
			&.active{
				color:txt;
				max-height:100%;
			}
			&.active:not(:disabled):not(.disabled){
				&.active,
				&:active{
					background-color:bg4;
					border-radius:barshape(NBCS,NBCSm);
					border-bottom:none;
				}
			}
		}
		& .nav-item{
			margin-bottom:0;
			&.show .nav-link.active{
				color:txt;
				max-height:100%;
			}
		}
	}
	.wiki-toc{//TODO what's this
		background-color:bg3;
		border-color:brd;
		border-radius:0.4em;
	}
	.form-autocomplete-suggestions{
		background-color:bg3;
		border-color:brd;
		border-width:1px;
	}
	.mform fieldset{
		border-bottom-color:brd;
	}
	.matchtext{
		background-color:hbtn !important;
		color:bg3 !important;}
	.card{
		border-radius:crad;
		background-color:bg3;
		&-img{
			border-radius:crad crad 0 0;
			overflow:hidden;
		}
		&-body{
			border-radius:0 0 crad crad;
		}
	}
	.alert{
		border-radius:crad;
		&-danger{
			background-color:fals;
			color:txt;
		}
		&-info{
			background-color:pb;
			color:bg1 !important;
			&>a{
				filter:brightness(1.3);
			}
		}
		&-success{
			background-color:tru;
			color:txt;
		}
	}
	#page-mod-quiz-attempt #connection{
		&-error{
			background-color:fals;
			color:txt;
		}
		&-ok{
			background-color:tru;
			color:txt;
		}
	}
	.moodle-dialogue>.moodle-dialogue-content{
		background-color:bg3 !important;}
	.close,
	.moodle-dialogue-base .closebutton{
		text-shadow:none;
		opacity:1;
		color:txt;}
	.yui3-button{
		background-image:none;}
	.modal-header,
	.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd,
	.path-mod-assign [data-region="grade-panel"] .popout>.col-md-3{
		border-color:brd;}
	.path-mod div.activity-information{
		border-bottom-color:brd;
	}
	.format-tiles ul.tiles .headerabovetiles button.selected,
	.headerabovetiles button:active,
	.headerabovetiles button:focus,
	.format-tiles .modal-header{
		background-color:btn;
		color:htxt;}
	div.comment-area textarea{
		background-color:bg3;
		border:solid 1px brd;
		border-radius:irad;
		padding:0.25em;
		line-height:100%;
		color:txt !important;}
	ul.comment-list>li{
		background-color:bg3 !important;
		border-radius:irad;
		& .text_to_html{
			color:txt;
		}
	}
	.comment-delete>a{
		&>i{
			color:fals;
			filter:brightness(1.5);
		}
		&:hover>i{
			color:fals;
			filter:brightness(2);}
	}
	#coursesearchbox{
		background-color:bg3;
		border-color:brd;
		color:txt;
	}
	.table,
	table.collection,
	table.flexible,
	.generaltable{
		& th,
		& td,
		& thead th{
			border-color:brd;
			color:txt;
		}
	}
	.yui3-datatable{
		& .yui3-datatable-header{
			background-color:bg3 !important;
			text-shadow:none;
			color:txt !important;
			border-bottom:solid 1px brd;
		}
		& .yui3-datatable-cell,
		& .yui3-datatable-header{
			border-left-color:brd;
		}
		& .yui3-datatable-sort-liner{
			display:flex;
			align-items:space-between;
			padding-right:1em;
			& .yui3-datatable-sort-indicator{
				background-image:url(svg_select_arrs);
				background-position:center right;
				background-size:100%;
				width:0.8em;
				height:0.8em;
			}
		}
		& .yui3-datatable-data>tr>td{
			background-color:bg3 !important;
		}
	}
	.preferences-container .preference-table{
		border-color:brd;
		color:txt;
		& tr td:nth-child(even),
		& tr th:nth-child(even){
			border-color:brd;
			background-color:bg2_5;
		}
	}
	.modal{//TODO what's this
		&-dialog>&-content{
			background-color:bg4;
			border-radius:0.5em;}
		&-header{
			border-color:brd;
			border-radius:0.5em 0.5em 0 0;}
		&-body .form-control{
			color:txt;
		}
		&-footer{
			border-color:brd;}
		&-title{
			color:htxt !important;
		}
	}
	#id_comments{
		color:txt;}
	
	input[type="checkbox"]{
		appearance:none;
		min-width:1em;
		max-width:1em;
		min-height:1em;
		max-height:1em;
		border:0.12em solid hbrd;
		border-radius:irad;
		color:txt;
		&:checked:after{
			content:"";
			position:absolute;
			font:normal normal normal 14px/1 FontAwesome;
		}
	}
	input[type="radio"]{
		appearance:none;
		min-width:1em;
		max-width:1em;
		min-height:1em;
		max-height:1em;
		background-image:radial-gradient(#0000 50%,hbrd 60%,#0000 70%);
		background-size:1em 1em;
		&:checked{
			background-image:radial-gradient(hbrd 30%, #0000 40%,#0000 50%,hbrd 60%,#0000 70%);
		}
	}
	input[type="file"]{
		cursor:pointer;/*not default for some reason?*/
		&::-webkit-file-upload-button{
			background-color:bg4;
			color:txt;
			border:none;
			border-radius:irad;
			cursor:pointer;
			&:hover{
				background-color:bg5;
				color:txt;
			}
		}
	}
	@supports (-moz-appearance:none){/*firefox-specific hack*/
		input[type="file"]{
			color:dtxt;
			filter:invert(0.8);}
	}
	input.organizer_filtertable{//TODO what's this
		background-color:bg2;
		color:txt;
		border:solid 1px brd;
		border-radius:0.25em;
		padding-left:0.25em;
		padding-right:0.25em;
		&:focus{
			background-color:bg3;
			border-color:hbrd;
			color:htxt;
		}
	}
	.form-control{
		border-radius:irad;
		background-color:bg3;
		border-color:brd;
		color:txt;
		&:disabled,
		&[readonly]{
			background-color:bg6;
			cursor:not-allowed;
			&:hover{
				background-color:bg6;
			}
		}
		&:hover,
		&:focus{
			background-color:bg4;
			color:txt;
		}
		select&{
			appearance:none;
			background-image:url(svg_select_arrs);
			background-repeat:no-repeat;
			background-position:right center;
			background-origin:content-box;
			background-size:0.75rem;
			padding-right:0.25rem;
		}
	}
	.input-group{
		&>.form-control{
			&,
			&.border-right-0{
				border-radius:irad 0 0 irad;
			}
			&.border-left-0{
				border-radius:0 irad irad 0;
				&.border-right-0{
					border-radius:0;
				}
			}
		}
		&-prepend>span{
			border-radius:irad 0 0 irad;
		}
		&-append{
			border-radius:0 irad irad 0;
			overflow:hidden;
			&>.btn-primary{
				border:none;
				border-radius:0;
			}
		}
	}
	#searchwiki{//TODO what's this
		background-color:bg3;
		border:solid 1px brd;
		border-radius:0.25em;
		height:2rem;
		color:txt;
		&:hover{
			background-color:bg4;
		}
	}
	.border-bottom{
		border-bottom-color:brd !important;}
	code{
		color:mtxt;
		background-color:bg1;
		outline:solid 2px bg0;
		font-family:Monospace;
		font-size:1.08em;
		padding:0 0.1em;
	}
	.highlight{
		outline:solid 1px hlnk;}
	.aalink,
	.arrow_link,
	a:not([class]),
	.activityinstance>a,
	#page-footer a:not([class]){
		&.focus,
		&:focus{//janky box-shadow offsets; a better solution is desired
			color:hlnk;
			if LSI=="C"{
				background-color:#0000;
				box-shadow:0 -0.2rem brd,0 0.2rem brd;
				border-radius:0.3em;
			}else if LSI="B"{
				background-color:#0000;
				box-shadow:0 0.4rem 0 -0.1rem bg2,0 -0.4rem 0 -0.1rem bg2,0 0 0 0.1rem bg2,0 0 0 0.3rem brd;
			}else if LSI=="U"{
				background-color:#0000;
				box-shadow:0 0 0 2px bg2,0 0.2rem 0 1px brd;
				border-radius:0.3em;
			}else if LSI=="F"{
				background-color:bg4;
				box-shadow:0 -.2rem bg4,0 .2rem brd;
			}else if LSI=="R"{
				background-color:#0000;
				box-shadow:0 0 0 2px bg2,0 0 0 3px brd;
				border-radius:0.3em;
			}else if LSI=="E"{
				background-color:#0000;
				box-shadow:0 0 0 2px bg2,0 0 0 3px brd;
			}
		}
	}
	#qrcode>img{
		filter:none;
		background-color:#FFF;
		padding:4px;
	}
	.forumpost{
		border-color:brd;
		border-radius:crad;
	}
	/*Editor Atto*/
	.editor_atto{
		& .icon{
			filter:invert(1) hue-rotate(180deg);
		}
		&_content{
			background-color:bg2 !important;
			border:none !important;
			border-bottom-left-radius:0.5em;
			border-bottom-right-radius:0.5em;
			resize:none;
			&_wrap{
				border-color:brd !important;
				border:solid 1px;
				border-top:none;
				color:txt;
				background-color:bg3;
				border-bottom-left-radius:0.5em;
				border-bottom-right-radius:0.5em;
			}
		}
		&_toolbar{
			background-color:bg2 !important;
			border-color:brd !important;
			border-top-left-radius:0.5em;
			border-top-right-radius:0.5em;
			& button:hover{
				background:radial-gradient(ellipse at center,bg3 60%,bg2 100%);
				background-color:bg2;
			}
		}
		&_notification .atto_{
			&info,
			&warning{
				border-radius:0.5em;//TODO what's this
				border-top-right-radius:0;
				border:solid 1px brd;
				margin-top:-1px;
			}
			&warning{
				background-color:fals;
			}
			&info{
				background-color:bg3;
			}
		}
	}
	.atto_group{
		background-color:bg3 !important;
		border:none !important;
		&>button{
			border-color:brd !important;
		}
	}
	/*Filemanager*/
	.filemanager{
		& .fp-navbar{
			background-color:bg3;
			border-radius:crad crad 0 0;
			border:none;
			border-bottom:solid 1px brd;
		}
		& &-container{
			background-color:bg3;
			border-radius: 0 0 crad crad;
			border:none !important;
		}
		& .yui3-datatable{
			&-header{
				border-bottom-color:brd !important;
			}
			&-even,
			&-odd{
				& .yui3-datatable-cell{
					background-color:bg2 !important;
					border-left-color:bg2 !important;
				}
			}
		}
		& .btn{
			background-color:bg5;
			color:lnk;
			&:hover{
				background-color:bg6;
				color:hlnk;
			}
			&:active{
				background-color:brd !important;
				color:hlnk;
			}
			&>.icon{
				vertical-align:middle;
			}
		}
		.moodle-dialogue & .fp-thumbnail{
			border:none;
			min-width:112px;
			background-color:#0000;
		}
		& .fp-content:focus{
			outline:none;
		}
		& .fp-treeview .fp-folder>tbody>tr>td{
			background-color:bg3;
		}
		& .fp-pathbar .fp-path-folder{
			background:none;
			&::before{
				display:inline-block;
				width:0;
				content:"";
				font:normal normal normal 14px/1 FontAwesome;
			}
		}
	}
	.filepicker{
		& .fp-navbar{
			border:solid 1px brd;
			border-bottom:none;
			border-bottom-left-radius:0;
			border-bottom-right-radius:0;
			padding-bottom:0;
		}
		& .fp-content{
			background-color:#0000;
			border:solid 1px brd;
			border-top:none;
			border-top-left-radius:0;
			border-top-right-radius:0;
			height:initial;
			padding-bottom:1em;
		}
		& .moodle-dialogue-bd{
			min-height:20vh;
			max-height:80vh;
			padding-bottom:1em;
			overflow-y:auto;
			& .file-picker{
				margin-bottom:1em;
			}
		}
	}
	.filepicker,
	.file-picker,
	.filemanager{
		& .fp-viewbar{
			background-color:bg5;
			border-radius:irad;
			overflow:hidden;
			&>.btn{
				background-color:bg5;
				border-radius:0;
				color:lnk;
				&:focus{
					outline:none;
					box-shadow:none;
					outline-offset:0;
					color:hlnk;
				}
				&:hover{
					color:hlnk;
					background-color:bg6;
				}
				&.checked{
					background-color:btn;
					&>.icon{
						color:hlnk;
					}
				}
			}
			&:not(.disabled) a.checked{
				color:hlnk;
			}
		}
		& .fp-info .fp-thumbnail{
			border-radius:irad;
			box-shadow:0 0 0.5em bg0;
		}
		& .fp-thumbnail{
			border:none;
			min-width:112px;
			background-color:#0000;
			border-bottom:none;
			&>img{
				border:none;
			}
		}
		& .fp-iconview .fp-file{
			box-shadow:0 0 0.5em bg0;
			border-radius:irad irad 0 0;
			&name{
				background-color:bg3;
				border-top:none;
				border-radius: 0 0 irad irad;
				padding:0 0.1em 0.1em 0.1em;
				box-shadow:0 0 0.5em bg0;
				margin-bottom:0.5em;
				&-field{
					padding-left:1em;
					margin-left:-1em;
					padding-right:1em;
					margin-top:-3px;
					margin-right:-1em;
				}
			}
			&:hover .fp-filename-field{
				overflow:hidden;
				height:auto;
			}
		}
	}
	.dndupload-target{
		background-color:bg3 !important;}
	/*ace editor*/
	.ace-tm{
		background-color:bg0;
		color:txt;
		& .ace_gutter{
			background-color:bg2;
			color:txt;
			&-active-line{
				background-color:bg3;
				color:htxt;
			}
		}
		& .ace_marker-layer .ace_active-line{
			background-color:#FFF1;
		}
		& .ace_print-margin{
			background-color:brd;
		}
		& .ace_cursor{
			color:htxt;
		}
		& .ace_indent-guide{
			background-image:none;
			border-right:solid 1px brd;
		}
	}
	.ui_wrapper[style*="border: 1px solid darkgrey"]{
		border-color:brd !important;}
	/*Coderunner - TODO: check if this still applies or if it's been completely replaced by VPL*/
	coderunner{
		#page-question-type-& div.ui_wrapper,
		.que.& div.ui_wrapper{
			background-color:bg1;
		}
		.que.& div{
			.^[0]-test-results.bad,
			.pre_syntax_error,
			.pre_question_error{
				background-color:fals;
			}
		}
		.que.& div.&-test-results.good,
		#page-question-type-& tr.&-failed-test.fixed{
			background-color:tru;
		}
	}
	/*VPL IDE*/ //TODO: border radii
	#vpl_menu{
		border-radius:0.25em 0.25em 0 0;
	}
	#vpl_tabs{
		border-radius:0 0 0.25em 0.25em;
	}
	.ui-state-default,
	.ui-widget-content .ui-state-default,
	.ui-widget-header .ui-state-default{
		border:none;
		background:bg4;
	}
	.ui-state-active,
	.ui-widget-content .ui-state-active,
	.ui-widget-header .ui-state-active,
	a.ui-button:active,
	.ui-button:active,
	.ui-button.ui-state-active:hover{
		border:none;
		background:bg4;
		border-top:inset 1px brd;
		&>a{
			color:hlnk !important;
		}
	}
	.ui-corner-all{
		border-radius:0.25em;
	}
	.vpl_ide_tr{
		height:auto !important;
		border-radius:0 0 0.25em 0.25em;
		background:bg3;
	}
	.ui-widget-header{
		display:flex;
		border:none;
		background:bg3;
	}
	.ui-button{
		border:none;
		background:bg4;
		margin:1px;
		margin-right:calc(0.1em + 1px);
		&:hover{
			background:bg5;
		}
	}
	.ui-controlgroup-horizontal{
		margin:0 calc(0.1em + 1px) 0 1px;
		& .ui-button{
			margin-left:0;
			margin-right:0;
		}
	}
	.ui-widget.ui-widget-content{
		border:solid 1px #0000;
		background:bg3;
	}
	.ui-widget-content{
		color:txt;
		background:bg4;
	}
	.vpl_ide_file{
		margin-top:0;
	}
	.vpl_ide_closeicon{
		text-shadow:none;
	}
	//TODO: replace with custom icons
	.ui-state-active .ui-icon,
	.ui-button:active .ui-icon{
		filter:brightness(2);
	}
	.ui-icon,
	.ui-widget-content .ui-icon{
		filter:brightness(4);
	}
	.ui-state-hover .ui-icon,
	.ui-state-focus .ui-icon,
	.ui-button:hover .ui-icon,
	.ui-button:focus .ui-icon{
		filter:brightness(2);
	}
	.ui-dialog{
		& .ui-dialog-buttonpane button{
			color:txt;
			border:solid 1px #0000;
			border-color:#0000;//because of a css technicality
			background:bg4;
			&:hover{
				border-color:brd;
			}
		}
		& .ui-dialog-titlebar-close:hover{
			border:none;
			background:#0000;
		}
	}
	/*Calendar*/
	.calendar_event,
	.path-calendar .maincalendar .calendarmonth ul li .badge.badge-circle.calendar_event{
		&_course{
			background-color:cal0;
		}
		&_category{
			background-color:cal1;
		}
		&_group{
			background-color:cal2;
		}
		&_user{
			background-color:cal3;
		}
		&_site{
			background-color:cal4;
		}
	}
	.qtext>div{
		background-color:bg1 !important;
		&>table>tbody>tr>td>pre{
			color:txt;
		}
	}
	/*Replacement images + image manipulation*/
	.atto_image_button_text-bottom.img-responsive,
	.atto_image_button_text-top.img-responsive,/*most likely embedded images in 	assignment descriptions*/
	.qtext img,/*images in the question text, most of the time classless*/
	img[src*="mod_page"],/*images with mod_page in the source url, most of the images in courses have this*/
	.region-main-content img:not([class]):not([src^="https://elearning.tgm.ac.at/theme/"]){/*images without class - a last resort, really*/
		filter:EICC;}
	img[src$="elearning.tgm.ac.at/theme/image.php/classic/core/"][src$="/i/loading_small"]{
		filter:invert(1);
	}
	.loading{
		background-image:none !important;
		&:before{
			content:"\00a0";
			background-image:url("https://elearning.tgm.ac.at/theme/image.php/classic/core/123456/i/loading_small");
			background-repeat:no-repeat;
			filter:invert(1);
		}
	}
	img[src="https://elearning.tgm.ac.at/theme/image.php/classic/core/1604966287/u/f1"]{
		filter:brightness(0.39) contrast(2)}
	/*progress bar time descriptor*/
	.progressBarCell>.nowDiv{
		&>.icon{
			display:none;}
		&.lastHalfNow{
			background:url("data:image/svg+xml;utf-8,<svg xmlns='http://www.w3.org/2000/svg'><path d='M0 0H16V16Z' fill='rgb(127,127,127)'/></svg>") no-repeat;
			background-position:5.5em 5px;
			padding-right:1.3em;}
		&.firstNow{
			background:url("data:image/svg+xml;utf-8,<svg xmlns='http://www.w3.org/2000/svg'><path d='M16 0H0V16Z' fill='rgb(127,127,127)'/></svg>") no-repeat;
			background-position:0em 5px;
			padding-left:1.3em;
		}
	}
	/*row where it displays what you've done and what you didn't. Normally only in course/view.php, but also in other places*/
	.barRow{
		& .progressBarCell{
			border-color:bg2;
			border-radius:0;
			&[style*="background-color:#73A839"]{
				background-color:tru !important;
			}
			&[style*="background-color:#C71C22"]{
				background-color:fals !important;
			}
		}
		& .firstProgressBarCell{
			border-right:none !important;
			border-radius:lbarshape(PBCS,PBCSm) !important;
			&.lastProgressBarCell{
				border-radius:barshape(PBCS,PBCSm) !important;
			}
		}
		& .lastProgressBarCell{
			border-radius:rbarshape(PBCS,PBCSm) !important;
		}
	}
	 // don't ask
	.block_completion_progress{
		& .barModeScroll,
		& .barModeSqueeze{
			.progressBarCell{
				border:none;
				margin-left:1px;
				&.completed{
					background-color:tru;
				}
				&.notCompleted{
					background-color:fals;
				}
				&:first-of-type{
					border-radius:lbarshape(PBCS,PBCSm);
					margin-left:0;
				}
				&:last-of-type{
					border-radius:rbarshape(PBCS,PBCSm);
					border-right:none;
				}
				&:only-of-type{
					border-radius:barshape(PBCS,PBCSm);
				}
			}
		}
	}
	/*flexitour*/
	span[data-flexitour="container"]{
		&[x-placement="top"],
		&[x-placement="top-start"]{
			& div[data-role="arrow"]::after{
				border-top-color:bg4;
				box-shadow:0 -0.5em bg4;
			}
		}
		&[x-placement="bottom"],
		&[x-placement="bottom-start"]{
			& div[data-role="arrow"]::after{
				border-bottom-color:bg4;
				box-shadow:0 0.5em bg4;
			}
		}
	}
	/*badges*/
	.badge{
		background-color:bg4;
		color:txt;
		padding:0 0.5em;
		border-radius:irad;
		&-info{
			padding:0.25em 0.5em;
		}
		&-secondary>strong{
			background-color:brd;
			color:dtxt;
		}
		&-success>strong{
			background-color:tru;
			color:htru;
		}
		&>strong{
			display:inline-block;
			margin-left:-0.5em;
			padding:0.25em 0.25em 0.25em 0.5em;
			border-radius:irad 0 0 irad;
		}
	}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/my/.*?") {
	.dashboard-card{
		border-width:0;
		background-color:bg3;}
	.course{
		&-info-container{
			background-color:bg3;
		}
		&-menubtn{
			&:hover,&:focus{
				background-color:bg4 !important;
			}
		}
		&listitem{
			background-color:bg2;
			border-color:#0000;
			border-top-color:brd;
			border-bottom-color:brd;
		}
		&-summaryitem{
			background-color:bg3 !important;
			border:none !important;
		}
	}
	.card-img{
		filter:EICC;}
	.card-footer{
		background-color:bg3 !important;}
	.progress{
		background-color:bg1 !important;
		border-color:bg1 !important;
		margin-bottom: 0.5rem; // added by Philip Damianik
		&-bar{
			background-color:btn;
		}
		if CPB=="C"{
			height:0.35rem !important; // added by Philip Damianik
		}else if CPB=="CBL"{
			border:none !important;
			height:0.35rem !important;
		}else if CPB=="R"{
			border-radius:100vh;//to make sure it's perfectly round
		}else if CPB=="RBL"{
			border:none !important;
			border-radius:100vh;
		}else if CPB=="RC"{
			border:none !important;
			border-radius:0.35rem;
			height:0.35rem !important;
		}
	}
	.block-myoverview>.container-fluid.p-0{
		margin-top:1.5em;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/(\\?.*)?") {
	.sitelink{
		filter:invert(1) hue-rotate(180deg);}
	#login_username,
	#login_password{
		background-color:bg3 !important;
		color:txt !important;}
	.forumpost{
		border-color:brd !important;
		border-radius:crad;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/login/index\\.php.*?") {
	.mt-3{
		color:txt;}
	img.img-fluid{
		filter:invert(1) hue-rotate(180deg) brightness(0.9);}
	#modal{
		&-content{background-color:bg2;}
		&-header{border-bottom:none;}
		&-footer{border-top:none;}
	}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/course/view\\.php.*?") {
	#region-main{
		background-color:bg2;}
	.section{
		border-bottom-color:brd !important;
		& li.activity.hasinfo{
			border-bottom-color:brd;
		}
		&.current::before{
			border-color:btn;
		}
	}
	.progressEventInfo .iconInInfo{ /*Fixes a specific icon being distorted because someone forgot that width was set to 12px*/
		width:1.2em;
		height:1.2em;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/user/files\\.php.*?") {
	.filemanager-container,
	.fp-navbar{
		background-color:bg3;
		border:none !important;}
	a.btn-sm{
		background-color:bg4;
		&:active,
		&.active,
		&:focus,
		&.checked{
			background-color:bg6 !important;
		}
	}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/grade/report/overview/index\\.php.*?") {
	thead>tr>th{
		border-bottom:none !important;}
	table td,
	table th{
		border-color:brd !important;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/message/output/popup/notifications.php.*?") {
	.content-item-container{
		background-color:bg2;
		color:txt;
		border-color:brd;
		&:first-child{
			border-top-left-radius:0.25rem;
		}
		&.selected{
			background-color:bg3;
			border-color:hbrd;
			color:htxt;
		}
		&.selector,
		&:hover{
			&.content-item-footer .timestamp{
				color:txt;
			}
		}
	}
	.notification-area{
		border-color:brd;
		& .control-area{
			border-right-color:brd;
		}
		& .content-area .header{
			border-bottom-color:brd;
		}
	}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/message/index\\.php.*?") {
	#region-main .border-right.h-100{
		border-color:bg3 !important;}
}

@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/user/(profile|view)\\.php.*?") {
	#region-main .profile_tree>.node_category{
		background-color:bg3;
		border-radius:crad;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/mod/organizer/view\\.php.*") {
	#organizer_main_cointainer{
		& span.countdown{
			&_normal{
				background-color:tru;
				color:htxt;
			}
			&_passed{
				background-color:bg4;
			}
			&_critical{
				background-color:fals;
			}
		}
		& tr.registered_slot td{
			background-color:tru !important;
			color:htxt;
		}
		
		& table tr.past_due td{
			background-color:bg4 !important;
		}
	}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/mod/assign/view\\.php.*?") {
	/*Abgabestatus*/
	.submissionsummarytable td{
		&.submission{
			&graded{
				background-color:tru;
				color:txt;
			}
			&notgraded{
				background-color:#0000;
				color:txt;
			}
			&statussubmitted{
				background-color:tru;
				color:txt;
			}
		}
		&.latesubmission,
		&.overdue{
			background-color:fals;
			color:txt;
			&>font{
				color:txt;
			}
		}
		&.earlysubmission{
			background-color:tru;
			color:txt;
		}
	}
	#jump-to-activity{
		background-color:bg3;
		border-color:brd;
		color:txt;}
	/*Grading criteria in full assignment view*/
	//see -> https://elearning.tgm.ac.at/mod/assign/view.php?id=206006
	#rubric-criteria>tbody{
		border-radius:crad;
		margin:1px;
		box-shadow:0 0 0 1px brd;
	}
	.gradingform_rubric .criterion{
		border-color:brd;
		border-right:none;
		border-left:none;
		&:first-of-type>td:first-of-type{
			border-top-left-radius:crad;
		}
		&:first-of-type>td:last-of-type{
			border-top-right-radius:crad;
		}
		&:last-of-type>td:first-of-type{
			border-bottom-left-radius:crad;
		}
		&:last-of-type>td:last-of-type{
			border-bottom-right-radius:crad;
		}
		&.even{
			border:none;
			background:#0000;
			&>td{
				background:bg4;
				&:first-of-type{
					background:bg5;
				}
			}
		}
		&.odd{
			&>td{
				background:bg3;
				&:first-of-type{
					background:bg4;
				}
			}
		}
		&:last-of-type{
			border-bottom:none;
		}
		& .levels .level{
			border-left-color:brd;
			&.last{
				border-right:none;
				border-radius:0 crad 0 0;
			}
		}
	}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/user/preferences\\.php.*?") {
	#region-main .card.mb-3{
		background-color:bg3;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/admin/tool/dataprivacy/mydatarequests\\.php.*?") {
	div[data-region="datarequests"]>.mt-1.mb-1>.btn.btn-primary{
		color:txt !important;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/mod/quiz.*?"), regexp(".*userstyle_testing/darklearning.*") {
	.moodle-dialogue-base .moodle-dialogue-wrap .moodle-dialogue-hd.yui3-widget-hd{
		color:txt;}
	.que.multichoice .answer{
		& div.r0,
		& div.r1{
			border-radius:irad;
			& .icon.fa{
				align-self:center;
			}
		}
		& .incorrect{
			background-color:fals;
		}
		& .correct{
			background-color:tru;
		}
	}
	.que .formulation{
		background-color:bg3;
		color:txt;
		border-radius:crad;}
	.que .correct .custom-select{
		background-color:tru;}
	.que .incorrect .custom-select{
		background-color:fals;}
	.que .correctness{
		&.notanswered,
		&.incorrect{
			background-color:fals;
		}
		&.correct{
			background-color:tru;
		}
	}
	.que .outcome{
		background-color:bg3;
		color:txt;
		border-radius:crad;}
	.que .info{	
		background-color:bg3;	
		border-radius:crad;	
		border:none;}	
	.que.essay .qtype_essay{
		&_response.readonly{
			background-color:bg4;
			padding-left:0.2em;
			border-radius:irad;
		}
		&_monospaced{
			background-color:bg2;
			padding:0.25em;
			border-radius:irad;
			color:txt;
			border-color:brd;
		}
	}
	.que.ddwtos {
		& .group1{
			background-color:bg3;
		}
		& .draghome,
		& .drop{
			border-radius:irad;
			border-color:brd;
		}
		& .draghome.placed:not(.beingdragged),
		& .drop{
			&:focus,
			&.valid-drag-over-drop{
				border-color:btn;
				box-shadow:0 0 5px 3px btn,inset 0 0 2px 0 btn;
			}
		}
	}
	.que.ddimageortext,
	form.mform fieldset#id_previewareaheader{
		& img.dropbackground,
		& img.group1{
			filter:EICC;
		}
	}
	.que.incorrect,
	.que.notanswered{
		& .answer>input[type="text"]{
			background-color:fals;
		}
	}
	.que.correct .answer>input[type="text"]{	
		background-color:tru;}
	.que .answer{
		&>.correct,
		&>.incorrect{
			&>.specificfeedback{
				border: solid 1px brd;
				border-radius:irad;
			}
		}
		&>.correct>.specificfeedback{
			background-color:tru;
		}
		&>.incorrect>.specificfeedback{
			background-color:fals;
		}
	}
	.path-mod-quiz #mod_quiz_navblock{
		& .qnbutton{
			&.correct>.trafficlight{
				background-color:tru;
				background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23CCC' d='M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z'/%3E%3C/svg%3E%0A");
			}
			&.partiallycorrect>.trafficlight{
				background-color:idk;
				background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='-12 -12 24 24'%3E%3Ccircle fill='%23CCC' r='12'/%3E%3C/svg%3E%0A");
			}
			&.incorrect
			&.notanswered{
				&>.trafficlight{
					background-color:fals;
					background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23CCC' d='M 4.828125 2.5 L 2 5.328125 L 9.0703125 12.398438 L 2 19.470703 L 4.828125 22.298828 L 11.898438 15.226562 L 18.970703 22.298828 L 21.798828 19.470703 L 14.726562 12.398438 L 21.798828 5.328125 L 18.970703 2.5 L 11.898438 9.5703125 L 4.828125 2.5 z '/%3E%3C/svg%3E");
				}
			}
			&.flagged .thispageholder{
				background-position:top right;
			}
		}
		& a.qnbutton,
		& span.qnbutton{
			color:txt !important;
			background-color:bg4;
		}
	}
	#mod_quiz_navblock{
		& .qnbutton>.thispageholder{
			border:none !important;
		}
		& .qn_buttons:not(.allquestionsononepage) .qnbutton.thispage>.thispageholder{
			box-shadow:0 0 1px 1px brd;
		}
	}
	.quizreviewsummary{
		border-radius:crad;
		overflow:hidden;
		&>tbody>tr{
			&:first-child>.cell{
				border-top:none;
			}
			&>.cell:first-child{
				background-color:bg3_5;
			}
			&>.cell:last-child{
				background-color:bg3;
			}
		}
	}
	#page-mod-quiz-view table.quizattemptsummary tr.bestrow td{
		border-color:brd;
		background-color:bg2;}
	.quizattemptsummary>thead>tr>th{
		border-bottom:none;}
	.path-mod-quiz #mod_quiz_navblock{
		& .qnbutton.notyetanswered>.trafficlight{	
			background-color:bg4;
		}
		& .qnbutton.answersaved,
		& .qnbutton.invalidanswer{
			&>.trafficlight{	
				background-color:brd;
			}
		}
		& span.qnbutton.thispage{
			box-shadow:0 0 0.2em #FFF;
		}
	}
	.answer>input[type="text"]{	
		background-color:bg4;}
	.answer>.form-control{//TODO what's this
		border-color:brd;
		color:txt;
		border-radius:0.5em;}
	.subquestion input[type="text"]{	
		background-color:bg4;	
		border-color:brd;	
		border-radius:irad;	
		color:txt;}	
	.submitbtns{
		& button[type="submit"].btn,	
		& input[type="submit"].btn{	
			background-color:bg3;	
			border-radius:irad;
			&.mod_quiz-next-nav{	
				background-color:btn;	
				border-color:btn;
			}
			&.btn.mod_quiz-next-nav:hover{	
				background-color:hbtn;	
				border-color:hbtn;
			}
		}
	}
	input[type="text"].correct{	
		background-color:tru;}	
	input[type="text"].incorrect{	
		background-color:fals;}
}
@-moz-document regexp("https?://elearning\\.tgm\\.ac\\.at/calendar/view\\.php.*?") {
	.eventlist .event .card{
		background-color:bg3;
		border-radius:crad !important;
		overflow:hidden;
	}
	.path-calendar .maincalendar{
		& .calendar_event_course{
			border:none;
		}
		& .calendarmonth ul li>a{
			text-overflow:clip;
			&:hover{
				overflow:visible;
				transform:translate(0,0);
				margin-bottom:0.45em;
				&.eventname{
					background-color:bg3;
					position:absolute;
					right:-3.5em;
				}
			}
		}
	}
}